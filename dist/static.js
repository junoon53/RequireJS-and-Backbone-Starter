var libpath=require("path"),http=require("http"),fs=require("fs"),url=require("url"),mime=require("mime"),path=".";http.createServer(function(e,t){var n=url.parse(e.url).pathname,r=libpath.join(path,n);libpath.exists(r,function(e){if(!e){t.writeHead(404,{"Content-Type":"text/plain"}),t.write("404 Not Found\n"),t.end();return}fs.statSync(r).isDirectory()&&(r+="/index.html"),fs.readFile(r,"binary",function(e,n){if(e){t.writeHead(500,{"Content-Type":"text/plain"}),t.write(e+"\n"),t.end();return}var i=mime.lookup(r);t.writeHead(200,{"Content-Type":i}),t.write(n,"binary"),t.end()})})}).listen(80),console.log("Server running");